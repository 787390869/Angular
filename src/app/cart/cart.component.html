<div class="container-fluid">
  <button class="btn btn-info add-book" data-toggle="modal" data-target="#myModal" (click)="openBigModal(template)" [disabled]="ischecked">添加驾驶员</button>
  <button class="btn btn-info delete-book" data-toggle="modal" data-target="#myModal2" (click)="deleteDriver()" [disabled]="ischecked">删除驾驶员</button>
  <button class="btn btn-info update-book" data-toggle="modal" data-target="#myModal3" (click)="openUpdateModal(template4)" [disabled]="ischecked">编辑驾驶员信息</button>
  <div class="dropdown">
    <button class="btn btn-default size" data-toggle="dropdown">单页数量
      <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li (click)="changeSize(5)"><a>5</a></li>
      <li (click)="changeSize(10)"><a>10</a></li>
      <li (click)="changeSize(20)"><a>20</a></li>
    </ul>
  </div>
  <div class="dropdown">
    <button class="btn btn-default sort" data-toggle="dropdown">排序方式
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a (click)="changeSort(1)">按Id升序排序</a></li>
      <li><a (click)="changeSort(0)">按Id降序排序</a></li>
    </ul>
  </div>
  <nav aria-label="Page navigation" class="pages">
    <ul class="pagination">
      <li (click)="last()">
        <a aria-label="Previous" >
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li><a *ngFor="let pagenumber of pageli" (click)="jump( $event )">{{pagenumber}}</a></li>
      <li (click)="next()">
        <a aria-label="Next">
          <span aria-hidden="true" >&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
  <div class="search-page input-group has-feedback">
    <div class="input-group-addon">输入页码:</div>
    <input class="form-control"  [(ngModel)]="currentPage">
    <div class="input-group-addon glyphicon search" (click)="jumpInput()" >
      <span class="glyphicon glyphicon-share-alt"></span>
    </div>
  </div>
  <div class="search-tel input-group has-success">
    <div class="input-group-addon">驾驶员电话:</div>
    <input class="form-control" type="text" [(ngModel)]="userKeyupTelnumber">
    <div class="input-group-addon glyphicon search" (click)="telnumberSerachRender()" >
      <span class="glyphicon glyphicon-search"></span>
    </div>
  </div>
  <div class="search-book input-group has-success">
    <div class="input-group-addon">驾驶员姓名:</div>
    <input class="form-control" type="text" [(ngModel)]="userKeyupDrivername">
    <div class="input-group-addon glyphicon search" (click)="drivernameSearchRender()" >
      <span class="glyphicon glyphicon-search"></span>
    </div>
  </div>
    <table class="table table-bordered table-hover">
      <tbody>
      <tr class="info">
        <th>选中框</th><th>ID</th><th>姓名</th><th>性别</th><th>电话号码</th><th>生日</th><th>身份证号</th><th>婚姻状况</th><th>公司</th>
      </tr>
      <tr *ngFor="let driver of drivers ">
        <th><input type="checkbox" class="checkbox" (change)="putCheckboxInList($event)" value=""></th>
        <th>{{driver.driverid}}</th><th (click)="openDetailModal(template3,$event)">{{driver.drivername}}</th><th>{{driver.driversex}}</th><th>{{driver.drivertelnumber}}</th>
        <th>{{driver.driverbirthday}}</th><th>{{driver.driveridentitynumber}}</th><th>{{driver.drivermaritalstatus}}</th><th>{{driver.drivercompany}}</th>
      </tr>
      </tbody>
    </table>

  <!-- 详情展示 -->
  <ng-template #template3>
    <div class="modal-header">
      <h4 class="modal-title pull-left">驾驶员:{{detailDrivername}}</h4>
      <button class="close pull-right" type="button" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <table class="table table-hover table-bordered">
        <thead>
        <tr><th class="bg-primary" style="width: 30%;">驾驶员头像</th><th class="bg-primary" style="width: 70%;">驾驶员信息</th></tr>
        </thead>
        <tbody>
        <tr><th rowspan="5"><img [attr.src]="detailsImage" class="detail-img"></th><th class="bg-info"><p>驾驶员ID:<a>{{detailDriverid}}</a></p></th></tr>
        <tr><th class="bg-info"><p>驾驶员姓名:<a>{{detailDrivername}}</a></p></th></tr>
        <tr><th class="bg-info"><p>性别:<a>{{detailDriversex}}</a></p></th></tr>
        <tr><th class="bg-info"><p>国籍:<a>{{detailDrivernationality}}</a></p></th></tr>
        <tr><th class="bg-info"><p>电话:<a>{{detailDrivertelnumber}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>驾驶员生日:<a>{{detailDriverbirthday}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>身份证号:<a>{{detailDriveridentitynumber}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>学历:<a>{{detailDriveracademic}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>英语水平:<a>{{detailDriverenglishskills}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>婚姻状况:<a>{{detailDrivermaritalstatus}}</a></p></th></tr>
        <tr><th colspan="2" class="bg-info"><p>所属公司:<a>{{detailDrivercompany}}</a></p></th></tr>
        </tbody>
      </table>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal" (click)="modalRef.hide()">确定</button>
    </div>
  </ng-template>


  <!-- Modal:添加驾驶员 -->
  <ng-template #template>
    <div class="modal-header">
      <h4 class="modal-title pull-left">添加驾驶员</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); driverForm.reset()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form [formGroup]="driverForm">
        <div>
          <img id="imagesrc" src="image/panda.jpg">
          <input type="file" id="image" (change)="addUploadPicture()">
        </div>
        <div class="form-group">
          <div class="input-group">
            <select class="form-control driversex" name="driversex" formControlName="driversex" required>
              <option [disabled]=true [selected]=true class="sex">性别</option>
              <option>男</option>
              <option>女</option>
            </select>
            <select class="form-control drivermarry" name="drivermaritalstatus" formControlName="drivermaritalstatus" required>
              <option [disabled]=true [selected]=true class="marry">婚姻状况</option>
              <option>未婚</option>
              <option>已婚</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
              <input class="form-control drivername" id="drivername" name="drivername"  formControlName="drivername" placeholder="驾驶员姓名(2-3位,必填)" required/>
              <input class="drivertelnumber form-control" id="drivertelnumber" name="drivertelnumber" formControlName="drivertelnumber" placeholder="驾驶员电话号码(11位,必填)" required/>
            <div [hidden]="getAddModalValid('drivername')" class="alert alert-danger drivernameerror">姓名为2-3位中文</div>
            <div [hidden]="getAddModalValid('drivertelnumber')" class="alert alert-danger drivertelerror">电话号为11位数字</div>
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control driverbirthday" autocomplete="off" bsDatepicker [bsConfig]="{dateInputFormat: 'YYYY-MM-DD' }" formControlName="driverbirthday" name="driverbirthday" placeholder="驾驶员生日(1998-04-10)" required/>
            <input class="form-control driveridentitynumber" name="driveridentitynumber" formControlName="driveridentitynumber" placeholder="驾驶员身份证号(18位,必填)" required/>
            <div [hidden]="getAddModalValid('driverbirthday')" class="alert alert-danger drivernameerror">生日格式为1998-04-10</div>
            <div [hidden]="getAddModalValid('driveridentitynumber')" class="alert alert-danger drivertelerror">身份证为18位数字</div>
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control drivercompany" name="drivercompany" formControlName="drivercompany" placeholder="驾驶员所属公司(必填)" required>
            <input class="form-control driveracademic notRequired" name="driveracademic" formControlName="driveracademic" placeholder="驾驶员学历(选填)">
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control driverenglishskills notRequired" name="driverenglishskills" formControlName="driverenglishskills" placeholder="驾驶员英语水平(选填)" >
            <input class="form-control drivernationality notRequired" name="drivernationality" formControlName="drivernationality" placeholder="驾驶员国籍(选填)">
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <div class="foot">
        <button type="button" class="btn-primary btn pull-left" (click)="addDriver(); driverForm.reset()" [disabled]="!driverForm.valid">保存</button>
        <button type="button" class="btn-default btn pull-right" (click)="modalRef.hide(); driverForm.reset()">关闭</button>
      </div>
    </div>
  </ng-template>

  <!-- 修改驾驶员信息 -->
  <ng-template #template4>
    <div class="modal-header">
      <h4 class="modal-title pull-left">修改驾驶员信息</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); driverForm.reset()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form [formGroup]="updateDriverForm" >
        <div>
          <img id="imagesrc2" src="">
          <input type="file" id="image2" (change)="updatePicture()">
        </div>
        <div class="form-group">
          <div class="input-group">
            <select class="form-control driversex" name="driversex" formControlName="driversex" required>
              <option [disabled]=true [selected]=true class="sex">性别</option>
              <option>男</option>
              <option>女</option>
            </select>
            <select class="form-control drivermarry" name="drivermaritalstatus" formControlName="drivermaritalstatus" required>
              <option [disabled]=true [selected]=true class="marry">婚姻状况</option>
              <option>未婚</option>
              <option>已婚</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control drivername"  name="drivername"  formControlName="drivername" placeholder="驾驶员姓名(2-3位,必填)" required/>
            <input class="drivertelnumber form-control"  name="drivertelnumber" formControlName="drivertelnumber" placeholder="驾驶员电话号码(11位,必填)" required/>
            <div [hidden]="getUpdateModelValid('drivername')" class="alert alert-danger drivernameerror">姓名为2-3位中文</div>
            <div [hidden]="getUpdateModelValid('drivertelnumber')" class="alert alert-danger drivertelerror">电话号为11位数字</div>
          </div>
        </div>



        <div class="form-group">
          <div class="input-group">
            <input class="form-control driverbirthday" autocomplete="off" bsDatepicker [bsConfig]="{dateInputFormat: 'YYYY-MM-DD' }" formControlName="driverbirthday" name="driverbirthday" placeholder="驾驶员生日(1998-04-10)" required/>
            <input class="form-control driveridentitynumber" name="driveridentitynumber" formControlName="driveridentitynumber" placeholder="驾驶员身份证号(18位,必填)"  required/>
            <div [hidden]="getUpdateModelValid('driverbirthday')" class="alert alert-danger drivernameerror">生日格式为1998-04-10</div>
            <div [hidden]="getUpdateModelValid('driveridentitynumber')" class="alert alert-danger drivertelerror">身份证为18位数字</div>
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control drivercompany" name="drivercompany" formControlName="drivercompany" placeholder="驾驶员所属公司(必填)" required>
            <input class="form-control driveracademic notRequired" name="driveracademic" formControlName="driveracademic" placeholder="驾驶员学历(选填)">
          </div>
        </div>

        <div class="form-group">
          <div class="input-group">
            <input class="form-control driverenglishskills notRequired" name="driverenglishskills" formControlName="driverenglishskills" placeholder="驾驶员英语水平(选填)" >
            <input class="form-control drivernationality notRequired" name="drivernationality" formControlName="drivernationality" placeholder="驾驶员国籍(选填)">
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn-primary btn pull-left" (click)="updateDriver1(); driverForm.reset()" [disabled]="!updateDriverForm.valid">保存</button>
      <button type="button" class="btn-default btn pull-right" (click)="modalRef.hide(); driverForm.reset()">关闭</button>
    </div>
  </ng-template>
  </div>
